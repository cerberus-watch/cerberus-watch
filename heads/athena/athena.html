<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Athena - Cerberus Watch</title>
    <link rel="stylesheet" href="/assets/css/ocean-dark.css">
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('analysis-form');
            const resultsDiv = document.getElementById('results');
            const safetyScoreEl = document.getElementById('safety-score');
            const summaryEl = document.getElementById('summary');

            form.addEventListener('submit', async function(event) {
                event.preventDefault();
                resultsDiv.style.display = 'block';
                safetyScoreEl.textContent = 'Analyzing...';
                summaryEl.innerHTML = '';

                const formData = new FormData(form);
                const data = Object.fromEntries(formData.entries());

                const response = await fetch('/analyze', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });

                const results = await response.json();

                safetyScoreEl.textContent = results.safety_score;
                summaryEl.innerHTML = results.summary;

                // Color-code the safety score
                if (results.safety_score === 'Good') {
                    safetyScoreEl.style.color = '#2e7d32'; // Green
                } else if (results.safety_score === 'Review Recommended' || results.safety_score === 'Caution Advised') {
                    safetyScoreEl.style.color = '#ed6c02'; // Orange
                } else {
                    safetyScoreEl.style.color = '#d32f2f'; // Red
                }
            });
        });
    </script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Athena</h1>
            <p class="subtitle">Online Dating Safety Analysis</p>
        </header>
        <main>
            <form id="analysis-form">
                <div class="form-group">
                    <label for="name">Person's Name:</label>
                    <input type="text" id="name" name="name" required>
                </div>
                <button type="submit">Analyze</button>
            </form>
            <div id="results" class="results-container" style="display: none;">
                <h2>Analysis Results</h2>
                <div class="result-item">
                    <strong>Safety Score:</strong> <span id="safety-score"></span>
                </div>
                <div class="result-item">
                    <strong>Summary:</strong>
                    <p id="summary"></p>
                </div>
            </div>
        </main>
    </div>
</body>
</html>
